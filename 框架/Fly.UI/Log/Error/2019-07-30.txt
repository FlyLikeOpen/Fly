
** [2019-07-30 17:52:11.693] - Begin **************************************************************
[LogID]: 8d75e719-81d1-4e6d-a096-b6fc74c24696
[Source]: WMSLocal
[Category]: Error
[OperatorUser]: 00000000-0000-0000-0000-000000000000
[Content]: System.Net.Sockets.SocketException (0x80004005): 一个封锁操作被对 WSACancelBlockingCall 的调用中断。
   在 System.Net.Sockets.Socket.Accept()
   在 IBB360.WMSLocal.APIImpls.Common.WebSocketServer.StartServer() 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Common\WebSocketServerManager.cs:行号 182
   在 IBB360.WMSLocal.APIImpls.Common.WebSocketServerManager.Start() 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Common\WebSocketServerManager.cs:行号 63
   在 IBB360.WMSLocal.APIImpls.Common.WebSocketServerManager.Start(Int32 serverPort) 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Common\WebSocketServerManager.cs:行号 44
   在 IBB360.WMSLocal.UI.Global.<>c__DisplayClass8_0.<StartSocketServer>b__0() 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.UI\Global.asax.cs:行号 128
[ServerIP]: 192.168.0.149
[ServerName]: DESKTOP-03QPLOV
[ServerTime]: 2019-07-30 17:52:11.671
[ProcessID]: 27992
[ProcessName]: w3wp
[ThreadID]: 7
[StackTrace]: 
** [2019-07-30 17:52:11.693] - End ****************************************************************

** [2019-07-30 18:25:04.490] - Begin **************************************************************
[LogID]: 84a55882-860e-4abe-bf8d-611a80199e6d
[Source]: WMSLocal
[Category]: Error
[OperatorUser]: 00000000-0000-0000-0000-000000000000
[Content]: System.Net.Sockets.SocketException (0x80004005): 一个封锁操作被对 WSACancelBlockingCall 的调用中断。
   在 System.Net.Sockets.Socket.Accept()
   在 IBB360.WMSLocal.APIImpls.Common.WebSocketServer.StartServer() 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Common\WebSocketServerManager.cs:行号 182
   在 IBB360.WMSLocal.APIImpls.Common.WebSocketServerManager.Start() 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Common\WebSocketServerManager.cs:行号 63
   在 IBB360.WMSLocal.APIImpls.Common.WebSocketServerManager.Start(Int32 serverPort) 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Common\WebSocketServerManager.cs:行号 44
   在 IBB360.WMSLocal.UI.Global.<>c__DisplayClass8_0.<StartSocketServer>b__0() 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.UI\Global.asax.cs:行号 128
[ServerIP]: 192.168.0.149
[ServerName]: DESKTOP-03QPLOV
[ServerTime]: 2019-07-30 18:25:04.441
[ProcessID]: 34560
[ProcessName]: w3wp
[ThreadID]: 7
[StackTrace]: 
** [2019-07-30 18:25:04.490] - End ****************************************************************

** [2019-07-30 18:46:08.244] - Begin **************************************************************
[LogID]: 3a9cb027-87e5-43cf-810c-c92c28e98bdb
[Source]: WMSLocal
[Category]: Error
[RequestUrl]: http://local.wmslocal.com/purchases/ajaxsubmitcount/
[RequestReferer]: http://local.wmslocal.com/purchases/mobilecount/?requestid=6c17ddf0-65ae-4a95-b7f4-c780f3890663
[UserHostName]: 127.0.0.1
[UserHostAddress]: 127.0.0.1
[OperatorUser]: [Harry] harry
[Content]: IBB360.Framework.SqlDbAccess.DaoSqlException: 对象名 'WMSLocal.Inventory.dbo.LocationLockLog' 无效。
<<Connection String>> : Data Source=localhost;Initial Catalog=WMSLocal.Queue;Integrated Security=False;Persist Security Info=False;User ID=sa;Password=123; Max Pool Size=4096; Min Pool Size=10
<<SQL Script>> : 
DECLARE @LockedType int = -1
DECLARE @DataRelationId uniqueidentifier
DECLARE @DataTaskId uniqueidentifier
DECLARE @Id uniqueidentifier
SELECT TOP 1 @Id=[Id], @LockedType = [Type], @DataRelationId=[RelationId], @DataTaskId=[TaskId]  FROM [WMSLocal.Inventory].[dbo].[LocationLockLog] WHERE [LocationId]=@locationId AND [Status]=0
IF(@@ROWCOUNT <= 0)
BEGIN
    INSERT INTO [WMSLocal.Inventory].[dbo].[LocationLockLog]
            ([Id]
            ,[RelationId]
            ,[TaskId]
            ,[Type]
            ,[LocationId]
            ,[LocationCode]
            ,[Status]
            ,[CreatedBy]
            ,[CreatedOn]
            ,[UpdatedBy]
            ,[UpdatedOn])
        VALUES
            (NEWID()
            ,@relationId
            ,@taskId
            ,@type
            ,@locationId
            ,@locationCode
            ,@status
            ,@userId
            ,GETDATE()
            ,NULL
            ,NULL)
    SELECT -2
END
ELSE
BEGIN
    IF(@DataRelationId=@relationId OR (@DataTaskId IS NOT NULL AND @DataTaskId=@taskId))
    BEGIN
        UPDATE [WMSLocal.Inventory].[dbo].[LocationLockLog] SET [TaskId]=@taskId WHERE [Id]=@Id
        SELECT -2
    END
    ELSE
    BEGIN
        SELECT @LockedType
    END
END

<<SQL Parameter(s)>> :
@locationId [Guid] : 84ef2af6-2449-4144-a1c3-86f1ba2737d4 [System.Guid]
@relationId [Guid] : 6c17ddf0-65ae-4a95-b7f4-c780f3890663 [System.Guid]
@taskId [String] :  [System.DBNull]
@type [Int32] : 0 [System.Int32]
@locationCode [String] : A-01-04 [System.String]
@status [Int32] : 0 [System.Int32]
@userId [Guid] : 042f7049-1930-481e-8825-fae4f325a3ca [System.Guid]
 ---> System.Data.SqlClient.SqlException: 对象名 'WMSLocal.Inventory.dbo.LocationLockLog' 无效。
   在 System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   在 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   在 System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   在 System.Data.SqlClient.SqlDataReader.get_MetaData()
   在 System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   在 System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   在 System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   在 System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   在 System.Data.SqlClient.SqlCommand.ExecuteScalar()
   在 IBB360.Framework.SqlDbAccess.SqlHelper.ExecuteScalar(String connStrKey, CommandType cmdType, String cmdText, Object parameter) 位置 D:\公司源码\trunk\ibb360\src\new\IBB360.Framework\IBB360.Framework.SqlDbAccess\SqlHelper_ExecuteBySpecifiedConnStrKey.cs:行号 137
   --- 内部异常堆栈跟踪的结尾 ---
   在 IBB360.Framework.SqlDbAccess.SqlHelper.ExecuteScalar(String connStrKey, CommandType cmdType, String cmdText, Object parameter) 位置 D:\公司源码\trunk\ibb360\src\new\IBB360.Framework\IBB360.Framework.SqlDbAccess\SqlHelper_ExecuteBySpecifiedConnStrKey.cs:行号 143
   在 IBB360.Framework.SqlDbAccess.SqlHelper.ExecuteScalar(DbInstance instance, CommandType cmdType, String cmdText, Object parameter) 位置 D:\公司源码\trunk\ibb360\src\new\IBB360.Framework\IBB360.Framework.SqlDbAccess\SqlHelper_ExecuteByDefaultConnStrKey.cs:行号 67
   在 IBB360.Framework.SqlDbAccess.SqlHelper.ExecuteScalar(DbInstance instance, String cmdText, Object parameter) 位置 D:\公司源码\trunk\ibb360\src\new\IBB360.Framework\IBB360.Framework.SqlDbAccess\SqlHelper_ExecuteByDefaultConnStrKey.cs:行号 82
   在 IBB360.Framework.SqlDbAccess.SqlHelper.ExecuteScalar[TResult](DbInstance instance, String cmdText, Object parameter) 位置 D:\公司源码\trunk\ibb360\src\new\IBB360.Framework\IBB360.Framework.SqlDbAccess\SqlHelper_ExecuteByDefaultConnStrKey.cs:行号 72
   在 IBB360.WMSLocal.APIImpls.Inventory.LocationTransferTaskApi.TryLockLocation(Guid locationId, LocationLockType type, Guid relationId, Nullable`1 taskId, Nullable`1 userId) 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Inventory\LocationTransferTaskApi.cs:行号 1331
   在 IBB360.WMSLocal.APIImpls.Purchases.InStockRequestApi.InStockCountResultSave(Guid requestId, Guid itemId, String barcode, String locationCode, InventoryType inventoryType, Nullable`1 expiryDate, Int32 qty, Int32 barCodeQty) 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Purchases\InStockRequestApi.cs:行号 634
   在 IBB360.WMSLocal.UI.Controllers.PurchasesController.AjaxSubmitCount(Guid requestId, String barcode, String locationCode, InventoryType inventoryType, Nullable`1 expiryDate, Int32 qty, Nullable`1 itemId, Nullable`1 barcodeQty) 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.UI\Controllers\PurchasesController.cs:行号 79
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<BeginInvokeSynchronousActionMethod>b__39(IAsyncResult asyncResult, ActionInvocation innerInvokeState)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`2.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3d()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<>c__DisplayClass2b.<BeginInvokeAction>b__1c()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<BeginInvokeAction>b__1e(IAsyncResult asyncResult)
[ServerIP]: 192.168.0.149
[ServerName]: DESKTOP-03QPLOV
[ServerTime]: 2019-07-30 18:46:08.220
[ProcessID]: 34560
[ProcessName]: w3wp
[ThreadID]: 29
[StackTrace]: 
** [2019-07-30 18:46:08.244] - End ****************************************************************

** [2019-07-30 19:08:28.861] - Begin **************************************************************
[LogID]: d7bf17d3-17b9-457b-b2e2-7bf3250f9847
[Source]: WMSLocal
[Category]: Error
[OperatorUser]: 00000000-0000-0000-0000-000000000000
[Content]: JobId为UpdateAllAdminUserDataFromERP的TimerJob执行发生程序异常：

System.Net.WebException: 远程服务器返回错误: (503) 服务器不可用。
   在 System.Net.HttpWebRequest.GetResponse()
   在 IBB360.Framework.Common.HelperUtility.HttpGet(String url, Encoding encoding, String contentType, String userAgent, String host, String referer) 位置 D:\公司源码\trunk\ibb360\src\new\IBB360.Framework\IBB360.Framework.Common\HelperUtility.cs:行号 643
   在 IBB360.WMSLocal.APIImpls.Common.StaffUserApi.UpdateAllAdminUserDataFromERP(String appId, String serviceUrl) 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Common\StaffUserApi.cs:行号 947
   在 IBB360.WMSLocal.UI.Global.<>c__DisplayClass6_0.<RegisterJobs>b__2(Object state) 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.UI\Global.asax.cs:行号 92
   在 IBB360.Framework.Common.TimerJob.<>c__DisplayClass1_0.<RegisterJob>b__0(Object s) 位置 D:\公司源码\trunk\ibb360\src\new\IBB360.Framework\IBB360.Framework.Common\AsynQueue\TimerJob.cs:行号 90
[ServerIP]: 192.168.0.149
[ServerName]: DESKTOP-03QPLOV
[ServerTime]: 2019-07-30 19:08:28.861
[ProcessID]: 34560
[ProcessName]: w3wp
[ThreadID]: 7
[StackTrace]: 
** [2019-07-30 19:08:28.861] - End ****************************************************************

** [2019-07-30 19:08:29.626] - Begin **************************************************************
[LogID]: ee6601e1-f3b5-40e9-8272-63df57e66a65
[Source]: WMSLocal
[Category]: Error
[OperatorUser]: 00000000-0000-0000-0000-000000000000
[Content]: System.Net.Sockets.SocketException (0x80004005): 一个封锁操作被对 WSACancelBlockingCall 的调用中断。
   在 System.Net.Sockets.Socket.Accept()
   在 IBB360.WMSLocal.APIImpls.Common.WebSocketServer.StartServer() 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Common\WebSocketServerManager.cs:行号 182
   在 IBB360.WMSLocal.APIImpls.Common.WebSocketServerManager.Start() 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Common\WebSocketServerManager.cs:行号 63
   在 IBB360.WMSLocal.APIImpls.Common.WebSocketServerManager.Start(Int32 serverPort) 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Common\WebSocketServerManager.cs:行号 44
   在 IBB360.WMSLocal.UI.Global.<>c__DisplayClass8_0.<StartSocketServer>b__0() 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.UI\Global.asax.cs:行号 128
[ServerIP]: 192.168.0.149
[ServerName]: DESKTOP-03QPLOV
[ServerTime]: 2019-07-30 19:08:29.626
[ProcessID]: 34560
[ProcessName]: w3wp
[ThreadID]: 22
[StackTrace]: 
** [2019-07-30 19:08:29.626] - End ****************************************************************
