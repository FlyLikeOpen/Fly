
** [2019-11-25 16:27:30.733] - Begin **************************************************************
[LogID]: eb28262c-2317-40ff-9fd8-6c40075097e0
[Source]: WMSLocal
[Category]: Error
[OperatorUser]: 00000000-0000-0000-0000-000000000000
[Content]: System.Net.Sockets.SocketException (0x80004005): 一个封锁操作被对 WSACancelBlockingCall 的调用中断。
   在 System.Net.Sockets.Socket.Accept()
   在 IBB360.WMSLocal.APIImpls.Common.WebSocketServer.StartServer() 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Common\WebSocketServerManager.cs:行号 182
   在 IBB360.WMSLocal.APIImpls.Common.WebSocketServerManager.Start() 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Common\WebSocketServerManager.cs:行号 63
   在 IBB360.WMSLocal.APIImpls.Common.WebSocketServerManager.Start(Int32 serverPort) 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Common\WebSocketServerManager.cs:行号 44
   在 IBB360.WMSLocal.UI.Global.<>c__DisplayClass8_0.<StartSocketServer>b__0() 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.UI\Global.asax.cs:行号 128
[ServerIP]: 192.168.137.1
[ServerName]: DESKTOP-03QPLOV
[ServerTime]: 2019-11-25 16:27:30.694
[ProcessID]: 8036
[ProcessName]: w3wp
[ThreadID]: 7
[StackTrace]: 
** [2019-11-25 16:27:30.733] - End ****************************************************************

** [2019-11-25 16:36:59.145] - Begin **************************************************************
[LogID]: 6a78a813-4654-45a9-8743-f17fdeba9209
[Source]: WMSLocal
[Category]: Error
[RequestUrl]: http://local.wmslocal.com/so/exportountboundchecklist/
[RequestReferer]: http://local.wmslocal.com/so/querysotooutboundchecklist/bytime/
[UserHostName]: 127.0.0.1
[UserHostAddress]: 127.0.0.1
[OperatorUser]: [Harry] harry
[Content]: IBB360.Framework.SqlDbAccess.DaoSqlException: 对象名 'WMSLocal.Base.dbo.SKUCustomsBooksInfo' 无效。
<<Connection String>> : Data Source=localhost;Initial Catalog=WMSLocal.Queue;Integrated Security=False;Persist Security Info=False;User ID=sa;Password=123; Max Pool Size=4096; Min Pool Size=10
<<SQL Script>> : 
WITH SO_Item_List AS
(
	SELECT
		[b].[ItemId],
		a.[StockId],
		SUM(b.Qty) AS [SummaryQty],
		CONVERT(DECIMAL(18, 4), SUM(b.[Qty] * b.[DeclaredUnitPrice]) / SUM(b.Qty)) AS [UnitPrice],
		CONVERT(DECIMAL(18, 2), CONVERT(DECIMAL(18, 4), SUM(b.[Qty] * b.[DeclaredUnitPrice]) / SUM(b.Qty)) * SUM(b.Qty)) AS [SummaryPrice]
	FROM
		[WMSLocal.Sales].[dbo].[SO] AS a WITH(NOLOCK)
	INNER JOIN
		[WMSLocal.Sales].[dbo].[SOItem] AS b WITH(NOLOCK)
			ON a.[Id]=b.[SOId]
	WHERE
		a.[Status]=88
		
    AND a.[UpdatedOn]>'2019/10/1 14:30:00' AND a.[UpdatedOn]<='2019/10/31 14:30:00'
	GROUP BY
		a.[StockId],
		b.[ItemId]
) 
SELECT
	ROW_NUMBER() OVER(ORDER BY b.[CreatedOn]) AS [RowNo],
	e.[SerialNo],
	e.[MaterialNo],
	'' AS [DeclareOrderItemSN],
	'' AS [CirculationDeclareOrderItemSN],
	e.[HSCode],
	e.[GoodsName],
	e.[GoodsSpec],
	'142' AS [Currency],
	e.[DeclareUnit],
	e.[LegalUnit],
	d.[Unit2] AS [LegalUnit2],
	a.[SummaryQty],
	d.[ConvLegalUnitNum] AS [LegalUnitNum],
	d.[ConvUnit2Num] AS [Unit2Num],
	a.[UnitPrice],
	a.[SummaryPrice],
	e.[OriginCountryCode],
	'142' AS [DestinationCountryCode],
	'' AS [WeightRatioFactor],
	'' AS [FirstRatioFactor],
	'' AS [SecondRatioFactor],
	d.[GrossWeight] * a.[SummaryQty] AS [GrossWeight],
	d.[NetWeight] * a.[SummaryQty] AS [NetWeight],
	3 AS [ExemptingMethod],
	'' AS [UnitConsumptionVersionNo],
	'' AS [Remark]
FROM
	SO_Item_List AS a
INNER JOIN
	[WMSLocal.Base].[dbo].[Item] AS b WITH(NOLOCK)
		ON a.[ItemId]=b.[Id]
INNER JOIN
	[WMSLocal.Base].[dbo].[SKU] AS c WITH(NOLOCK)
		ON b.[SKUId]=c.[Id]
INNER JOIN
	[WMSLocal.Base].[dbo].[ItemCustomsInfo] AS d WITH(NOLOCK)
		ON a.[ItemId]=d.[ItemId]
LEFT JOIN
	[WMSLocal.Base].[dbo].[SKUCustomsBooksInfo] AS e WITH(NOLOCK)
		ON c.[Id]=e.[SKUId]
		AND a.[StockId]=e.[StockId];
SELECT 
    a.[CCode] 
FROM
    [WMSLocal.Sales].[dbo].[SO] AS a WITH(NOLOCK)
WHERE
    a.[Status]=88
    
    AND a.[UpdatedOn]>'2019/10/1 14:30:00' AND a.[UpdatedOn]<='2019/10/31 14:30:00'
 ---> System.Data.SqlClient.SqlException: 对象名 'WMSLocal.Base.dbo.SKUCustomsBooksInfo' 无效。
   在 System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   在 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   在 System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   在 System.Data.SqlClient.SqlDataReader.get_MetaData()
   在 System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   在 System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   在 System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   在 System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   在 System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   在 System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   在 System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   在 System.Data.Common.DbDataAdapter.Fill(DataSet dataSet)
   在 IBB360.Framework.SqlDbAccess.SqlHelper.ExecuteDataSet(String connStrKey, CommandType cmdType, String cmdText, Object parameter) 位置 D:\公司源码\trunk\ibb360\src\new\IBB360.Framework\IBB360.Framework.SqlDbAccess\SqlHelper_ExecuteBySpecifiedConnStrKey.cs:行号 186
   --- 内部异常堆栈跟踪的结尾 ---
   在 IBB360.Framework.SqlDbAccess.SqlHelper.ExecuteDataSet(String connStrKey, CommandType cmdType, String cmdText, Object parameter) 位置 D:\公司源码\trunk\ibb360\src\new\IBB360.Framework\IBB360.Framework.SqlDbAccess\SqlHelper_ExecuteBySpecifiedConnStrKey.cs:行号 191
   在 IBB360.Framework.SqlDbAccess.SqlHelper.ExecuteDataSet(DbInstance instance, CommandType cmdType, String cmdText, Object parameter) 位置 D:\公司源码\trunk\ibb360\src\new\IBB360.Framework\IBB360.Framework.SqlDbAccess\SqlHelper_ExecuteByDefaultConnStrKey.cs:行号 88
   在 IBB360.Framework.SqlDbAccess.SqlHelper.ExecuteDataSet(DbInstance instance, String cmdText, Object parameter) 位置 D:\公司源码\trunk\ibb360\src\new\IBB360.Framework\IBB360.Framework.SqlDbAccess\SqlHelper_ExecuteByDefaultConnStrKey.cs:行号 93
   在 IBB360.WMSLocal.APIImpls.Sales.SOApi.QuerySOOutboundChecklist(Boolean queryByOrderNo, IEnumerable`1 includeMerchantOrderNoList, Nullable`1 from, Nullable`1 to, IEnumerable`1 excludeMerchantOrderNoList) 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Sales\SOApi.cs:行号 1406
   在 IBB360.WMSLocal.UI.Controllers.SOController.ExportOuntboundChecklist() 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.UI\Controllers\SOController.cs:行号 291
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<BeginInvokeSynchronousActionMethod>b__39(IAsyncResult asyncResult, ActionInvocation innerInvokeState)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`2.CallEndDelegate(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3d()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass46.<InvokeActionMethodFilterAsynchronouslyRecursive>b__3f()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<>c__DisplayClass2b.<BeginInvokeAction>b__1c()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass21.<BeginInvokeAction>b__1e(IAsyncResult asyncResult)
[ServerIP]: 192.168.137.1
[ServerName]: DESKTOP-03QPLOV
[ServerTime]: 2019-11-25 16:36:59.122
[ProcessID]: 8036
[ProcessName]: w3wp
[ThreadID]: 24
[StackTrace]: 
** [2019-11-25 16:36:59.145] - End ****************************************************************

** [2019-11-25 17:21:51.848] - Begin **************************************************************
[LogID]: bf60367c-0931-4c39-89f5-8a3c0e3a93f6
[Source]: WMSLocal
[Category]: Error
[OperatorUser]: 00000000-0000-0000-0000-000000000000
[Content]: System.Net.Sockets.SocketException (0x80004005): 一个封锁操作被对 WSACancelBlockingCall 的调用中断。
   在 System.Net.Sockets.Socket.Accept()
   在 IBB360.WMSLocal.APIImpls.Common.WebSocketServer.StartServer() 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Common\WebSocketServerManager.cs:行号 182
   在 IBB360.WMSLocal.APIImpls.Common.WebSocketServerManager.Start() 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Common\WebSocketServerManager.cs:行号 63
   在 IBB360.WMSLocal.APIImpls.Common.WebSocketServerManager.Start(Int32 serverPort) 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Common\WebSocketServerManager.cs:行号 44
   在 IBB360.WMSLocal.UI.Global.<>c__DisplayClass8_0.<StartSocketServer>b__0() 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.UI\Global.asax.cs:行号 128
[ServerIP]: 192.168.137.1
[ServerName]: DESKTOP-03QPLOV
[ServerTime]: 2019-11-25 17:21:51.841
[ProcessID]: 8036
[ProcessName]: w3wp
[ThreadID]: 19
[StackTrace]: 
** [2019-11-25 17:21:51.848] - End ****************************************************************

** [2019-11-25 17:21:52.241] - Begin **************************************************************
[LogID]: f0ddc14e-da1b-4080-ac82-d30f7a6faeac
[Source]: WMSLocal
[Category]: Error
[OperatorUser]: 00000000-0000-0000-0000-000000000000
[Content]: JobId为UpdateAllAdminUserDataFromERP的TimerJob执行发生程序异常：

System.Threading.ThreadAbortException: 正在中止线程。
   在 System.Net.UnsafeNclNativeMethods.OSSOCK.recv(IntPtr socketHandle, Byte* pinnedBuffer, Int32 len, SocketFlags socketFlags)
   在 System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags, SocketError& errorCode)
   在 System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   在 System.Net.PooledStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   在 System.Net.Connection.SyncRead(HttpWebRequest request, Boolean userRetrievedStream, Boolean probeRead)
   在 System.Net.ConnectStream.ProcessWriteCallDone(ConnectionReturnResult returnResult)
   在 System.Net.ConnectStream.CallDone(ConnectionReturnResult returnResult)
   在 System.Net.ConnectStream.CloseInternal(Boolean internalCall, Boolean aborting)
   在 System.Net.ConnectStream.System.Net.ICloseEx.CloseEx(CloseExState closeState)
   在 System.Net.HttpWebRequest.EndWriteHeaders_Part2()
   在 System.Net.HttpWebRequest.EndWriteHeaders(Boolean async)
   在 System.Net.HttpWebRequest.WriteHeadersCallback(WebExceptionStatus errorStatus, ConnectStream stream, Boolean async)
   在 System.Net.ConnectStream.WriteHeaders(Boolean async)
   在 System.Net.HttpWebRequest.EndSubmitRequest()
   在 System.Net.Connection.SubmitRequest(HttpWebRequest request, Boolean forcedsubmit)
   在 System.Net.ServicePoint.SubmitRequest(HttpWebRequest request, String connName)
   在 System.Net.HttpWebRequest.SubmitRequest(ServicePoint servicePoint)
   在 System.Net.HttpWebRequest.GetResponse()
   在 IBB360.Framework.Common.HelperUtility.HttpGet(String url, Encoding encoding, String contentType, String userAgent, String host, String referer, IDictionary`2 customHeaders)
   在 IBB360.WMSLocal.APIImpls.Common.StaffUserApi.UpdateAllAdminUserDataFromERP(String appId, String serviceUrl) 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Common\StaffUserApi.cs:行号 947
   在 IBB360.WMSLocal.UI.Global.<>c__DisplayClass6_0.<RegisterJobs>b__2(Object state) 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.UI\Global.asax.cs:行号 92
   在 IBB360.Framework.Common.TimerJob.<>c__DisplayClass1_0.<RegisterJob>b__0(Object s)
[ServerIP]: 192.168.137.1
[ServerName]: DESKTOP-03QPLOV
[ServerTime]: 2019-11-25 17:21:52.147
[ProcessID]: 8036
[ProcessName]: w3wp
[ThreadID]: 20
[StackTrace]: 
** [2019-11-25 17:21:52.241] - End ****************************************************************

** [2019-11-25 17:21:52.334] - Begin **************************************************************
[LogID]: 91362e16-a228-464d-a8a1-dff67bff2c0b
[Source]: WMSLocal
[Category]: Error
[OperatorUser]: 00000000-0000-0000-0000-000000000000
[Content]: JobId为UpdateAllAdminUserDataFromERP的TimerJob执行发生程序异常[外围异常]：

System.Threading.ThreadAbortException: 正在中止线程。
   在 IBB360.Framework.Common.TimerJob.<>c__DisplayClass1_0.<RegisterJob>b__0(Object s)
[ServerIP]: 192.168.137.1
[ServerName]: DESKTOP-03QPLOV
[ServerTime]: 2019-11-25 17:21:52.251
[ProcessID]: 8036
[ProcessName]: w3wp
[ThreadID]: 20
[StackTrace]: 
** [2019-11-25 17:21:52.334] - End ****************************************************************

** [2019-11-25 19:42:56.385] - Begin **************************************************************
[LogID]: 7250ddfe-162c-4c15-8e9f-97c19ea9f069
[Source]: WMSLocal
[Category]: Error
[OperatorUser]: 00000000-0000-0000-0000-000000000000
[Content]: System.Net.Sockets.SocketException (0x80004005): 一个封锁操作被对 WSACancelBlockingCall 的调用中断。
   在 System.Net.Sockets.Socket.Accept()
   在 IBB360.WMSLocal.APIImpls.Common.WebSocketServer.StartServer() 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Common\WebSocketServerManager.cs:行号 182
   在 IBB360.WMSLocal.APIImpls.Common.WebSocketServerManager.Start() 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Common\WebSocketServerManager.cs:行号 63
   在 IBB360.WMSLocal.APIImpls.Common.WebSocketServerManager.Start(Int32 serverPort) 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.APIImpls\Common\WebSocketServerManager.cs:行号 44
   在 IBB360.WMSLocal.UI.Global.<>c__DisplayClass8_0.<StartSocketServer>b__0() 位置 D:\公司源码\trunk\ibb360\source_code\IBB360.WMSLocal\IBB360.WMSLocal.UI\Global.asax.cs:行号 128
[ServerIP]: 127.0.0.1
[ServerName]: DESKTOP-03QPLOV
[ServerTime]: 2019-11-25 19:42:56.369
[ProcessID]: 29976
[ProcessName]: w3wp
[ThreadID]: 11
[StackTrace]: 
** [2019-11-25 19:42:56.385] - End ****************************************************************
